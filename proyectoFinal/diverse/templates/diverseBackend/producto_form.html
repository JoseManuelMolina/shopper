{% extends 'diverseBackend/baseBackend.html' %}
{% block content %}
    <div class="row">
        <div class="col-md-12">
            <h3>Crear Producto</h3>

            <form method="POST">
                {% csrf_token %}

                    <div class="form-group col-md-10">
                        {{ form.num_ref }}
                        </br>
                        <label for="{{ form.precio.label }}">{{ form.precio.label }}</label></br>
                        {{ form.precio }}
                        </br>
                        <label for="{{ form.imagen.label }}">{{ form.imagen.label }}</label></br>
                        {{ form.imagen }}
                        </br>
                        <label for="{{ form.sexo_id.label }}">{{ form.sexo_id.label }}</label></br>
                        {{ form.sexo_id }}
                        </br></br>
                        <label for="{{ form.subCategoria_id.label }}">{{ form.subCategoria_id.label }}</label></br>
                        {{ form.subCategoria_id }}
                        </br></br> 
                        <label for="{{ form.marca_id.label }}">{{ form.marca_id.label }}</label></br>
                        {{ form.marca_id }}
                        </br></br>
                        
                        </br></br>
                        <label for="{{ form.color_id.label }}">{{ form.color_id.label }}</label></br>
                        {{ form.color_id }}
                        </br></br>
                        <label for="{{ form.talla_id.label }}">{{ form.talla_id.label }}</label></br>
                        {{ form.talla_id }}
                        </br>
                    </div>

                <button type="submit" class="btn btn-primary">Crear</button>
            </form>
        </div>
    </div>
{% endblock content %}

{% block scriptsfooter %}
    <script>
        document.getElementById("marcaProducto").addEventListener("change", function(){
            console.log('hola');
            //document.getElementById("modeloProducto").innerHTML = "";
            $.ajax({
                type: 'POST',
                url: "obtener-modelos/",
                data: {
                    marca: $("marcaProducto").val()
                },
                dataType: 'json',
                success: function(response){
                    var select = document.getElementById("modeloProducto");
                    for(var i=0; i<response.modelos.length; i++){
                        var option = document.createElement('option');
                        option.value = response.modelos[i]['id'];
                        option.innerHTML = response.modelos[i]['nombre'];
                        select.appendChild(option);
                    }
                },
            });
        });
    </script>
{% endblock scriptsfooter %}